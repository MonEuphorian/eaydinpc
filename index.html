<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CSI: Digital Evidence Unit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #0a0a0f;
            font-family: 'Roboto Mono', monospace;
            color: #fff;
            position: relative;
        }

        /* Grid arka plan - cyberpunk stil */
        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(255, 0, 128, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
            z-index: 1;
        }

        /* Ana oyun konteyneri */
        #gameContainer {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            z-index: 2;
            background: linear-gradient(180deg, rgba(10,10,15,0.9) 0%, rgba(20,20,30,0.95) 100%);
        }

        /* Timer */
        #timer {
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 95vw;
            margin: 10px auto;
            padding: 0 12px;
            box-sizing: border-box;
            word-break: break-all;
        }

        /* Monitör grupları */
        .monitorGrid {
            width: 100%;
            max-width: 100%;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
            padding: 0 10px;
            margin-top: 48px;
        }

        .monitorRow {
            display: flex;
            justify-content: center;
            gap: 10px;
            width: 100%;
            max-width: 600px;
        }

        /* Üst ve alt kutular arasındaki mesafeyi artır */
        #passwordRow {
            margin-bottom: 60px;
        }

        /* Monitör stilleri */
        .monitor {
            width: min(8.5vw, 50px);
            height: min(8.5vw, 50px);
            border: 2px solid;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: min(4vw, 24px);
            font-weight: bold;
            background: rgba(10, 10, 15, 0.9);
            position: relative;
            transition: all 0.3s ease;
            text-shadow: 0 0 5px currentColor;
        }

        .password-monitor {
            border-color: #00ffff;
            color: #00ffff;
            box-shadow: 0 0 5px rgba(0, 255, 255, 0.3);
        }

        .code-monitor {
            border-color: #ff2e6d;
            color: #ff2e6d;
            box-shadow: 0 0 5px rgba(255, 46, 109, 0.3);
        }

        /* Sadece alt monitörlerde (codeRow) seçim efekti olacak */
        .code-monitor.selected {
            border-color: #00ffe0 !important;
            box-shadow: 0 0 24px #00ffe0, 0 0 8px #00ffe0;
            background: rgba(0,255,224,0.10);
            color: #00ffe0;
            transform: scale(1.13);
            z-index: 10;
        }
        /* Üst monitörlerde seçim efekti olmasın */
        .password-monitor.selected {
            border-color: inherit;
            box-shadow: none;
            background: inherit;
            color: inherit;
            transform: none;
            z-index: 1;
        }

        /* Kontrol paneli */
        #controlPanel {
            width: 100%;
            position: fixed;
            left: 0;
            right: 0;
            bottom: 8px;
            z-index: 10;
            width: 100vw;
            max-width: 100vw;
            padding: 10px 0 0 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            background: linear-gradient(180deg, rgba(10,10,15,0.95) 60%, rgba(10,10,15,0.99) 100%);
            box-shadow: 0 -2px 24px 0 rgba(0,0,0,0.5);
        }

        .controlRow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 500px;
            gap: 20px;
        }

        /* Kontrol butonları */
        #usb {
            width: min(30vw, 120px);
            height: min(30vw, 120px);
            border: 3px solid #ff2e6d;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(10, 10, 15, 0.9);
            font-size: min(10vw, 40px);
            box-shadow: 0 0 10px rgba(255, 46, 109, 0.3);
        }

        #usb.active {
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            color: #00ffff;
        }

        .arrowBtn {
            width: min(20vw, 80px);
            height: min(20vw, 80px);
            border: 2px solid #00ffff;
            background: rgba(10, 10, 15, 0.9);
            color: #00ffff;
            font-size: min(8vw, 32px);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        #connectBtn {
            width: min(80vw, 300px);
            height: min(15vw, 60px);
            border: 2px solid #00ffff;
            background: rgba(10, 10, 15, 0.9);
            color: #00ffff;
            font-size: min(5vw, 24px);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 2px;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        /* Kalkan simgeleri */
        .shield {
            width: min(5vw, 25px);
            height: min(5vw, 25px);
            border: 2px solid #00ffff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            background: rgba(10, 10, 15, 0.9);
            transition: all 0.3s ease;
            font-size: min(3vw, 14px);
            color: #00ffff;
        }

        .shield.active {
            border-color: #ff2e6d;
            color: #ff2e6d;
            box-shadow: 0 0 10px rgba(255, 46, 109, 0.5);
        }

        /* Oyun ekranları */
        .gameScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(10, 10, 15, 0.95);
            z-index: 100;
            gap: 30px;
            padding: 20px;
        }

        .screenTitle {
            font-size: min(8vw, 48px);
            color: #00ffff;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .screenText {
            font-size: min(4vw, 24px);
            color: #fff;
            text-align: center;
            max-width: 600px;
            line-height: 1.5;
            padding: 0 20px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        .bigBtn {
            padding: 15px 40px;
            border: 3px solid #00ffff;
            background: rgba(10, 10, 15, 0.9);
            color: #00ffff;
            font-size: min(5vw, 24px);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 2px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }

        .hidden {
            display: none !important;
        }

        /* Aktif durum efektleri */
        .monitor.selected,
        .arrowBtn:active,
        #connectBtn:active,
        #usb:active,
        .bigBtn:active {
            transform: scale(0.95);
        }

        /* Dokunmatik cihazlar için hover efektleri */
        @media (hover: hover) {
            .arrowBtn:hover,
            #connectBtn:hover,
            .bigBtn:hover {
                background: rgba(0, 255, 255, 0.1);
                box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            }

            #usb:hover {
                background: rgba(255, 46, 109, 0.1);
                box-shadow: 0 0 20px rgba(255, 46, 109, 0.5);
            }
        }

        /* Küçük ekranlar için optimizasyonlar */
        @media (max-height: 667px) {
            #gameContainer {
                padding: 10px;
            }

            .monitorGrid {
                gap: 15px;
            }

            #controlPanel {
                padding: 10px;
            }
        }

        /* ShieldRow ve shield-wrapper için yeni CSS */
        .shieldRow {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            min-height: 30px;
            position: relative;
            z-index: 2;
        }
        .shield-wrapper {
            flex: 1 1 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Oyun alanı ile kontrol paneli arasında boşluk bırak */
        #gameArea {
            padding-bottom: 120px;
        }
        @media (max-width: 600px) {
            #controlPanel {
                padding-bottom: 0;
                min-height: 120px;
                bottom: 36px;
            }
            #gameArea {
                padding-bottom: 140px;
            }
            #timer {
                margin-top: 32px;
            }
            .monitorGrid {
                margin-top: 96px;
            }
        }

        /* Dikey kablo (wire) stilleri */
        .monitor-vertical-wire {
            position: absolute;
            width: 2px;
            background: #fff;
            border-radius: 1px;
            z-index: 1;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="grid-overlay"></div>
    
    <div id="gameContainer">
        <!-- Başlangıç ekranı -->
        <div id="startScreen" class="gameScreen">
            <h1 class="screenTitle">CSI: Digital Evidence Unit</h1>
            <p class="screenText">Şüpheli cihazın şifresini kırın ve delillere ulaşın. Her deneme için 60 saniyeniz var.</p>
            <button id="startButton" class="bigBtn">BAŞLAT</button>
        </div>

        <!-- Ana oyun alanı -->
        <div id="gameArea" class="hidden">
            <div id="timer">60:00</div>

            <div class="monitorGrid">
                <div class="monitorRow" id="passwordRow">
                    <!-- Şifre monitörleri JavaScript ile eklenecek -->
                </div>
                <div class="monitorRow" id="codeRow">
                    <!-- Kod monitörleri JavaScript ile eklenecek -->
                </div>
            </div>

            <div id="controlPanel">
                <div class="controlRow">
                    <button id="leftBtn" class="arrowBtn">←</button>
                    <div id="usb">
                        <div id="usbIcon">⚡</div>
                    </div>
                    <button id="rightBtn" class="arrowBtn">→</button>
                </div>
                <button id="connectBtn">BAĞLAN</button>
            </div>
        </div>

        <!-- Oyun sonu ekranı -->
        <div id="gameOverScreen" class="gameScreen hidden">
            <h1 class="screenTitle">ERİŞİM BAŞARISIZ</h1>
            <p class="screenText">Güvenlik sistemi erişimi engelledi. Yeni bir deneme başlatın.</p>
            <button id="restartButton" class="bigBtn">TEKRAR DENE</button>
        </div>

        <!-- Kazanma ekranı -->
        <div id="winScreen" class="gameScreen hidden">
            <h1 class="screenTitle">ERİŞİM BAŞARILI</h1>
            <p class="screenText">Şifre kırıldı. Kalan süre: <span id="remainingTime">00:00</span></p>
            <button id="nextLevelButton" class="bigBtn">DEVAM ET</button>
        </div>
    </div>

    <script>
        // Oyun değişkenleri
        let gameStarted = false;
        let timer = 60;
        let timerInterval;
        let selectedMonitorIndex = 0;
        let currentLevel = 1;
        let isUSBActive = false;

        // DOM elementleri
        const gameArea = document.getElementById('gameArea');
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const winScreen = document.getElementById('winScreen');
        const timerElement = document.getElementById('timer');
        const passwordRow = document.getElementById('passwordRow');
        const codeRow = document.getElementById('codeRow');
        const usb = document.getElementById('usb');
        const connectBtn = document.getElementById('connectBtn');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');

        // Monitörleri oluştur
        function createMonitors() {
            // Önce mevcut monitörleri temizle
            passwordRow.innerHTML = '';
            codeRow.innerHTML = '';
            // Eski shield'ları ve kabloları temizle
            document.querySelectorAll('.shield').forEach(shield => shield.remove());
            document.querySelectorAll('.monitor-vertical-wire').forEach(wire => wire.remove());

            for(let i = 0; i < 9; i++) {
                // Şifre monitörleri
                const passwordMonitor = document.createElement('div');
                passwordMonitor.className = 'monitor password-monitor';
                passwordMonitor.textContent = '?';
                passwordMonitor.dataset.index = i;
                passwordRow.appendChild(passwordMonitor);

                // Kod monitörleri
                const codeMonitor = document.createElement('div');
                codeMonitor.className = 'monitor code-monitor';
                codeMonitor.textContent = '?';
                codeMonitor.dataset.index = i;
                codeRow.appendChild(codeMonitor);
            }

            // Dikey kabloları ve shield'ları doğru konumlandır
            setTimeout(() => {
                positionVerticalWires();
                positionShields();
            }, 0);
            updateSelection();
        }

        // Monitör seçimini güncelle (sadece codeRow'da seçim efekti uygula)
        function updateSelection() {
            // Tüm seçimleri kaldır
            Array.from(passwordRow.children).forEach(monitor => {
                monitor.classList.remove('selected');
            });
            Array.from(codeRow.children).forEach(monitor => {
                monitor.classList.remove('selected');
            });
            // Sadece alt satırda seçim efekti uygula
            if (codeRow.children[selectedMonitorIndex]) {
                codeRow.children[selectedMonitorIndex].classList.add('selected');
            }
        }

        // Timer fonksiyonu
        function startTimer() {
            timer = 60;
            updateTimerDisplay();

            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timer--;
                updateTimerDisplay();

                if(timer <= 0) {
                    clearInterval(timerInterval);
                    endGame(false);
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timer / 60);
            const seconds = timer % 60;
            timerElement.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        // Oyun sonu
        function endGame(won) {
            gameStarted = false;
            clearInterval(timerInterval);
            
            if(won) {
                document.getElementById('remainingTime').textContent = timerElement.textContent;
                winScreen.classList.remove('hidden');
                gameArea.classList.add('hidden');
            } else {
                gameOverScreen.classList.remove('hidden');
                gameArea.classList.add('hidden');
            }
        }

        // Event Listeners
        document.getElementById('startButton').addEventListener('click', () => {
            startScreen.classList.add('hidden');
            gameArea.classList.remove('hidden');
            gameStarted = true;
            createMonitors();
            startTimer();
        });

        document.getElementById('restartButton').addEventListener('click', () => {
            location.reload();
        });

        document.getElementById('nextLevelButton').addEventListener('click', () => {
            currentLevel++;
            gameArea.classList.remove('hidden');
            winScreen.classList.add('hidden');
            createMonitors();
            startTimer();
        });

        // Kontrol butonları
        leftBtn.addEventListener('click', () => {
            if (!gameStarted) return;
            selectedMonitorIndex = Math.max(0, selectedMonitorIndex - 1);
            updateSelection();
        });

        rightBtn.addEventListener('click', () => {
            if (!gameStarted) return;
            selectedMonitorIndex = Math.min(8, selectedMonitorIndex + 1);
            updateSelection();
        });

        usb.addEventListener('click', () => {
            if (!gameStarted) return;
            isUSBActive = !isUSBActive;
            usb.classList.toggle('active');
        });

        // Klavye kontrolleri
        document.addEventListener('keydown', (e) => {
            if (!gameStarted) return;

            switch(e.key) {
                case 'ArrowLeft':
                    leftBtn.click();
                    break;
                case 'ArrowRight':
                    rightBtn.click();
                    break;
                case ' ':
                    usb.click();
                    break;
                case 'Enter':
                    connectBtn.click();
                    break;
            }
        });

        // Connect butonu
        connectBtn.addEventListener('click', () => {
            if (!gameStarted || !isUSBActive) return;

            // Burada oyun mantığı devam edecek...
            // Şimdilik test için hemen kazanma
            endGame(true);
        });

        // Touch olayları için swipe desteği
        let touchStartX = 0;
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
        });

        document.addEventListener('touchend', (e) => {
            if (!gameStarted) return;
            
            const touchEndX = e.changedTouches[0].clientX;
            const diffX = touchEndX - touchStartX;

            if (Math.abs(diffX) > 50) { // minimum swipe mesafesi
                if (diffX > 0) {
                    rightBtn.click();
                } else {
                    leftBtn.click();
                }
            }
        });

        // Ekran boyutu değişirse kabloları ve kalkanları yeniden konumlandır
        window.addEventListener('resize', () => {
            setTimeout(() => {
                positionVerticalWires();
                positionShields();
            }, 0);
        });

        // Her passwordRow-codeRow monitör çifti için dikey kablo çiz
        function positionVerticalWires() {
            // Eski kabloları temizle
            document.querySelectorAll('.monitor-vertical-wire').forEach(wire => wire.remove());
            const passwordMonitors = passwordRow.children;
            const codeMonitors = codeRow.children;
            const container = document.getElementById('gameContainer');

            for (let i = 0; i < passwordMonitors.length; i++) {
                const topBox = passwordMonitors[i].getBoundingClientRect();
                const bottomBox = codeMonitors[i].getBoundingClientRect();
                const containerBox = container.getBoundingClientRect();

                // Başlangıç noktası: üst kutunun alt merkezi
                const startX = topBox.left + topBox.width / 2 - containerBox.left;
                const startY = topBox.bottom - containerBox.top;
                // Bitiş noktası: alt kutunun üst merkezi
                const endY = bottomBox.top - containerBox.top;
                const height = endY - startY;

                // Kabloyu oluştur
                const wire = document.createElement('div');
                wire.className = 'monitor-vertical-wire';
                wire.style.left = `${startX - 1}px`;
                wire.style.top = `${startY}px`;
                wire.style.height = `${height}px`;
                container.appendChild(wire);
            }
        }
    </script>
</body>
</html> 
