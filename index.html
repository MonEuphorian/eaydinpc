<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hack Simülatörü</title>
    <style>
        /* Temel stiller */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #031321;
            font-family: 'Courier New', monospace;
            color: #00d9ff;
            background-image: 
                linear-gradient(rgba(0, 30, 50, 0.7) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 30, 50, 0.7) 1px, transparent 1px);
            background-size: 30px 30px;
        }
        
        #gameContainer {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;
            overflow: hidden;
        }
        
        /* CPU ve ana sistem bileşenleri */
        #cpu {
            width: 160px;
            height: 120px;
            border: 3px solid #00d9ff;
            border-radius: 10px;
            margin-top: 30px;
            position: relative;
        }
        
        #cpuBase {
            width: 80px;
            height: 20px;
            background-color: #00d9ff;
            margin: 0 auto;
            position: relative;
            top: 120px;
        }
        
        /* Antivirüs Kalkanı */
        #shield {
            width: 80px;
            height: 80px;
            position: relative;
            margin: 15px auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #shieldIcon {
            width: 60px;
            height: 60px;
            border: 3px solid #00d9ff;
            border-radius: 50% 50% 50% 50% / 12% 12% 88% 88%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #shieldIcon:after {
            content: "✓";
            font-size: 30px;
            color: #00d9ff;
        }
        
        /* Zaman sayacı */
        #timer {
            font-size: 36px;
            font-weight: bold;
            color: #ff9100;
            margin: 30px 0 20px 0; /* Daha fazla boşluk için üst marjini arttırdım */
            text-shadow: 0 0 10px rgba(255, 145, 0, 0.5);
            text-align: center; /* Ortaya hizala */
            position: relative; /* Pozisyonu netleştir */
        }
        
        /* Şifre monitörleri ve kod modülleri */
        .monitorRow {
            position: relative;
            display: flex;
            justify-content: center;
            width: 90%;
            max-width: 800px;
            margin: 20px 0;
            z-index: 2;
        }
        
        .monitor {
            width: 50px;
            height: 50px;
            border: 3px solid #ff00aa;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            margin: 0 5px;
            position: relative;
        }
        
        .password-monitor {
            color: #00d9ff;
            border-color: #00d9ff;
        }
        
        .code-monitor {
            color: #00d9ff; /* Fuşya yerine cyan renk */
        }
        
        /* Kalkanlar (ara katman) */
        .shieldRow {
            display: none; /* Bu satırı eskiden görünen kalkanları gizlemek için ekliyoruz */
        }
        
        .miniShield {
            width: 30px;
            height: 30px;
            border: 2px solid #00d9ff;
            border-radius: 50% 50% 50% 50% / 12% 12% 88% 88%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.8);
            position: absolute; /* Mutlak konumlandırma */
            transform: translate(-50%, -50%); /* Merkeze hizalama */
            z-index: 5; /* Kabloların üzerinde görünmesi için */
        }
        
        .miniShield:after {
            content: "✓";
            font-size: 16px;
            color: #00d9ff;
        }
        
        /* Active sınıfı kaldırıldı çünkü artık sadece görsel amaçlı */
        
        /* USB ve kontrol butonları */
        #usbContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 400px;
            margin: 25px auto 0;
            position: relative;
        }
        
        .usb-row {
            display: flex;
            width: 100%;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .side-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 15px;
        }
        
        #usb {
            width: 70px;
            height: 100px;
            border: 3px solid #ff00aa;
            border-radius: 5px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        #usb.active {
            box-shadow: 0 0 20px #ff00aa, 0 0 40px #ff00aa;
            transform: scale(1.05);
        }
        
        #usbIcon {
            font-size: 40px;
            color: #00d9ff;
        }
        
        /* Sadece normal boyutlar için */
        @media (min-width: 768px) {
            #usbIcon {
                font-size: 40px;
            }
        }
        
        .controls {
            display: flex;
            justify-content: center;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn {
            background-color: transparent;
            color: #00d9ff;
            border: 2px solid;
            padding: 10px 20px;
            margin: 0 10px;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background-color: rgba(0, 217, 255, 0.1);
        }
        
        #connectBtn {
            border-color: #00d9ff;
            min-width: 140px;
            background-color: rgba(0, 0, 0, 0.6);
            box-shadow: 0 0 5px rgba(0, 217, 255, 0.5);
            color: #00d9ff;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 20px;
            padding: 12px 25px;
        }
        
        #connectBtn:hover {
            background-color: rgba(0, 217, 255, 0.2);
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.8);
        }
        
        .arrowBtn {
            border-color: #ff00aa;
            color: #ff00aa;
            width: 50px;
            height: 50px;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0;
            background-color: rgba(0, 0, 0, 0.6);
            box-shadow: 0 0 5px rgba(255, 0, 170, 0.5);
        }
        
        .arrowBtn:hover {
            background-color: rgba(255, 0, 170, 0.2);
            box-shadow: 0 0 10px rgba(255, 0, 170, 0.8);
        }
        
        /* Oyun ekranları */
        .gameScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: rgba(3, 19, 33, 0.9);
            z-index: 100;
            color: #00d9ff;
        }
        
        #startScreen {
            display: flex;
        }
        
        #gameOverScreen, #winScreen {
            display: none;
        }
        
        .screenTitle {
            font-size: 48px;
            margin-bottom: 30px;
            color: #ff00aa;
            text-shadow: 0 0 10px rgba(255, 0, 170, 0.7);
            text-align: center;
        }
        
        .screenText {
            font-size: 24px;
            margin-bottom: 40px;
            text-align: center;
            max-width: 80%;
            line-height: 1.4;
        }
        
        .bigBtn {
            background-color: transparent;
            border: 3px solid #00d9ff;
            color: #00d9ff;
            padding: 15px 30px;
            font-size: 24px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .bigBtn:hover {
            background-color: rgba(0, 217, 255, 0.2);
            text-shadow: 0 0 10px #00d9ff;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
        }
        
        /* Seçili kutu için animasyon */
        @keyframes selected-pulse {
            0% { box-shadow: 0 0 15px #00d9ff, 0 0 25px #00d9ff; }
            50% { box-shadow: 0 0 20px #ffffff, 0 0 30px #00d9ff; }
            100% { box-shadow: 0 0 15px #00d9ff, 0 0 25px #00d9ff; }
        }
        
        /* Aktif monitör vurgusu */
        .monitor.selected {
            box-shadow: 0 0 15px #00d9ff, 0 0 25px #00d9ff;
            border-color: #ffffff;
            border-width: 3px;
            background-color: rgba(0, 217, 255, 0.3);
            z-index: 20; /* Diğer monitörlerin üzerinde görünmesi için z-index artırıldı */
            position: relative;
            transform: scale(1.1); /* Biraz daha büyük göster */
            outline: 2px solid white; /* Beyaz bir dış çizgi ekle */
            outline-offset: 2px; /* Dış çizgiyi biraz dışarı çıkart */
            animation: selected-pulse 1.5s infinite; /* Seçili kutu animasyonu */
        }
        
        /* Monitör üzerindeki işaretçi - Kaldırıldı */
        .monitor.selected::before {
            display: none;
        }
        
        @keyframes pointer-bounce {
            0% {
                transform: translateX(-50%) translateY(0);
            }
            100% {
                transform: translateX(-50%) translateY(-5px);
            }
        }
        
        /* Kilitlenmiş monitör */
        .monitor.locked {
            border-color: #00ff00;
        }
        
        /* Doğru değer ve kilitli */
        .monitor.locked.correct {
            color: #00ff00; /* Saf yeşil */
            text-shadow: 0 0 10px #00ff00;
            border-color: #00ff00;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.7);
            z-index: 15; /* Seçilmemiş kutulardan daha yüksek ama seçili kutunun altında */
        }
        
        /* Slot makinası durduktan sonra doğru değer geldiğinde kutucuğun stilini değiştir */
        .monitor.correct-value {
            color: #00d9ff; /* Su yeşili (cyan) rengi */
            text-shadow: 0 0 10px #00d9ff;
            border-color: #00d9ff;
        }
        
        /* Hem seçili hem de doğru değer içeren monitor */
        .monitor.selected.correct-value {
            color: #00d9ff;
            box-shadow: 0 0 15px #00d9ff, 0 0 25px #00d9ff;
            border-color: #ffffff;
            text-shadow: 0 0 5px #00d9ff;
            background-color: rgba(0, 217, 255, 0.3);
            outline: 2px solid white; /* Beyaz bir dış çizgi ekle */
            outline-offset: 2px; /* Dış çizgiyi biraz dışarı çıkart */
            animation: selected-pulse 1.5s infinite; /* Seçili kutu animasyonu */
        }
        
        /* Kilitleme animasyonu */
        .monitor.just-locked {
            animation: locked-pulse 0.5s ease;
        }
        
        @keyframes locked-pulse {
            0% { transform: scale(1); border-color: #ff00aa; }
            50% { transform: scale(1.2); border-color: #00ff00; }
            100% { transform: scale(1); border-color: #00ff00; }
        }
        
        /* Animasyonlar */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 217, 255, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 217, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 217, 255, 0); }
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        /* Mobil uyumluluk için */
        @media (max-width: 767px) {
            body {
                font-size: 16px;
                padding-bottom: 350px; /* Daha büyük butonlar için ek boşluk */
            }
            
            #gameContainer {
                justify-content: flex-start;
                padding: 20px 0 350px 0; /* Alt kısma ek boşluk */
                min-height: 100vh;
                height: auto;
            }
            
            .monitor {
                width: 35px;
                height: 35px;
                font-size: 18px;
                margin: 0 4px;
                border-width: 2px;
            }
            
            .miniShield {
                width: 25px;
                height: 25px;
                border-width: 2px;
                z-index: 3;
            }
            
            .miniShield:after {
                font-size: 14px;
            }
            
            .screenTitle {
                font-size: 28px;
            }
            
            .screenText {
                font-size: 16px;
            }
            
            .bigBtn {
                padding: 12px 25px;
                font-size: 18px;
            }
            
            #timer {
                font-size: 32px;
                margin: 20px 0;
            }
            
            #usb {
                width: 160px; /* İki katına çıkardık */
                height: 200px; /* İki katına çıkardık */
                margin-bottom: 5px;
            }
            
            #usbIcon {
                font-size: 80px; /* İkon boyutunu da iki katına çıkardık */
            }
            
            .side-controls {
                margin: 0 20px; /* Daha büyük USB için yan boşlukları da arttırdık */
            }
            
            .arrowBtn {
                width: 130px; /* 65px'in 2 katı */
                height: 130px; /* 65px'in 2 katı */
                font-size: 60px; /* 30px'in 2 katı */
                border-width: 3px;
                box-shadow: 0 0 15px rgba(255, 0, 170, 0.7);
            }
            
            #usbContainer {
                margin: 0;
                position: fixed;
                bottom: 80px; /* Zeminden yukarı çektik */
                left: 0;
                right: 0;
                background-color: rgba(3, 19, 33, 0.95);
                padding: 15px 0;
                z-index: 50;
                border-top: 2px solid rgba(0, 217, 255, 0.3);
                box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.5);
            }
            
            .controls {
                margin-top: 5px;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 16px;
                margin: 0 5px;
            }
            
            #connectBtn {
                min-width: 360px; /* 180px'in 2 katı */
                height: 80px; /* Yüksekliği de 2 kat arttırdık */
                margin-top: 5px;
                padding: 0;
                font-size: 40px; /* 20px'in 2 katı */
                border-width: 3px;
                box-shadow: 0 0 15px rgba(0, 217, 255, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .wire {
                width: 4px;
            }
            
            /* Monitörler arasındaki mesafe */
            .monitorRow {
                margin: 20px 0;
                max-width: 90%;
            }
            
            /* Monitör satırları arasında daha az mesafe */
            #passwordRow {
                margin-bottom: 20px;
                margin-top: 20px;
            }
            
            #codeRow {
                margin-top: 20px;
                margin-bottom: 10px;
                position: static;
                bottom: auto;
            }
            
            /* Seçili kutu mobilde daha belirgin */
            .monitor.selected {
                box-shadow: 0 0 15px #00d9ff, 0 0 25px #00d9ff;
                border-width: 3px;
                transform: scale(1.15);
                outline: 2px solid white; /* Beyaz bir dış çizgi ekle */
                outline-offset: 2px; /* Dış çizgiyi biraz dışarı çıkart */
            }
            
            /* Doğru değere sahip kilitli kutular daha belirgin */
            .monitor.locked.correct {
                box-shadow: 0 0 12px #00ff00;
                border-width: 3px;
                z-index: 15;
            }
            
            /* Seçili kilitli kutular - mobil ek stil */
            .monitor.selected.locked.correct {
                border-color: #ffffff;
                box-shadow: 0 0 15px #00d9ff, 0 0 25px #00d9ff;
                z-index: 20;
                transform: scale(1.15);
                background-color: rgba(0, 217, 255, 0.3);
                outline: 2px solid white; /* Beyaz bir dış çizgi ekle */
                outline-offset: 2px; /* Dış çizgiyi biraz dışarı çıkart */
            }
        }
        
        /* Daha küçük ekranlar için (telefonlar) */
        @media (max-width: 480px) {
            body {
                padding-bottom: 300px;
            }
            
            #gameContainer {
                padding: 20px 0 300px 0;
            }
            
            .monitor {
                width: 30px;
                height: 30px;
                font-size: 16px;
                margin: 0 3px;
                border-width: 2px;
            }
            
            .miniShield {
                width: 22px;
                height: 22px;
                border-width: 2px;
            }
            
            .miniShield:after {
                font-size: 12px;
            }
            
            .screenTitle {
                font-size: 24px;
            }
            
            .screenText {
                font-size: 14px;
            }
            
            #timer {
                font-size: 28px;
                margin: 15px 0;
            }
            
            .monitorRow {
                margin: 15px 0;
                width: 95%;
            }
            
            /* Monitör satırları arasında daha az mesafe */
            #passwordRow {
                margin-bottom: 15px;
                margin-top: 15px;
            }
            
            #codeRow {
                margin-top: 15px;
                margin-bottom: 10px;
                position: static;
                bottom: auto;
            }
            
            .btn {
                padding: 8px 15px;
                font-size: 14px;
                margin: 0 3px;
            }
            
            #connectBtn {
                min-width: 300px; /* 150px'in 2 katı */
                height: 70px;
                margin-top: 5px;
                font-size: 36px; /* 18px'in 2 katı */
                border-width: 3px;
            }
            
            #usb {
                width: 120px; /* Küçük ekranlarda biraz daha küçültüyoruz ama yine de büyük */
                height: 150px;
            }
            
            #usbIcon {
                font-size: 60px;
            }
            
            .side-controls {
                margin: 0 15px;
            }
            
            .arrowBtn {
                width: 110px; /* 55px'in 2 katı */
                height: 110px; /* 55px'in 2 katı */
                font-size: 52px; /* 26px'in 2 katı */
                border-width: 3px;
            }
            
            .wire {
                width: 3px;
            }
            
            #usbContainer {
                padding: 10px 0;
                bottom: 60px; /* Küçük ekranlarda biraz daha az yukarı çektik */
            }
        }
        
        /* Aşama geçiş animasyonu */
        .transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
            opacity: 1;
            transition: opacity 1s ease;
        }
        
        .transition-text {
            color: #00ff00;
            font-size: 36px;
            font-weight: bold;
            text-align: center;
            text-shadow: 0 0 20px #00ff00;
            animation: text-scale 2s ease infinite;
        }
        
        @keyframes text-scale {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Kablo çizgileri */
        .wires-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none; /* Tıklamaları engellememek için */
        }
        
        .wire {
            position: absolute;
            height: 100px; /* Başlangıç yüksekliği, dinamik olarak ayarlanacak */
            width: 4px; /* Kablo kalınlığı arttırıldı */
            background-color: #ff00aa; /* Varsayılan kablo rengi değiştirildi - pembe */
            transform-origin: top center;
            box-shadow: 0 0 8px #ff00aa; /* Daha parlak glow efekti */
            z-index: 1;
        }
        
        /* Aktif kablolar */
        .wire.active {
            background-color: #ff00aa;
            box-shadow: 0 0 15px #ff00aa; /* Daha yoğun glow */
            animation: wire-pulse 1.5s infinite;
            width: 6px; /* Aktif kablo daha kalın */
        }
        
        /* Başarıyla kilitlenen monitörler için kablo rengi */
        .wire.success {
            background-color: #00ff00;
            box-shadow: 0 0 12px #00ff00;
            width: 5px; /* Başarılı kablo biraz kalın */
        }
        
        /* Matriks yeşili ikon için stil */
        .miniShield.matrix-green {
            border-color: #00ff00; /* Matriks yeşili sınır */
            box-shadow: 0 0 8px #00ff00; /* Matriks yeşili glow efekti */
        }
        
        .miniShield.matrix-green:after {
            color: #00ff00; /* Matriks yeşili içerik */
            text-shadow: 0 0 8px #00ff00;
        }
        
        @keyframes wire-pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        /* Dokunmatik cihazlar için daha büyük tıklama alanları */
        @media (pointer: coarse) {
            .btn {
                min-height: 44px; /* Dokunmatik için önerilen minimum dokunma alanı */
            }
            
            #usb {
                min-height: 60px;
            }
            
            .monitor {
                touch-action: manipulation; /* Çift dokunma zoom'u engelle */
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- Başlangıç ekranı -->
        <div id="startScreen" class="gameScreen">
            <h1 class="screenTitle">SİBER HACK SİMÜLATÖRÜ</h1>
            <p class="screenText">Hedef sisteme erişmek için antivirüs korumasını atlatın ve şifreyi kırın. Her aşama için 60 saniyeniz var.</p>
            <button id="startButton" class="bigBtn">HACK BAŞLAT</button>
        </div>
        
        <!-- Oyun bitti ekranı -->
        <div id="gameOverScreen" class="gameScreen">
            <h1 class="screenTitle">ERİŞİM ENGELLENDİ</h1>
            <p class="screenText">Antivirüs yazılımı saldırınızı engelledi! Tekrar denemek ister misiniz?</p>
            <button id="restartButton" class="bigBtn">YENİDEN DENE</button>
        </div>
        
        <!-- Kazanma ekranı -->
        <div id="winScreen" class="gameScreen">
            <h1 class="screenTitle">ERİŞİM SAĞLANDI!</h1>
            <p class="screenText">Hedef sisteme başarıyla sızdınız ve tüm dosyalara erişim kazandınız.</p>
            <button id="playAgainButton" class="bigBtn">YENİDEN OYNA</button>
        </div>
        
        <!-- Kablo container - burada kablolar dinamik olarak oluşturulacak -->
        <div class="wires-container" id="wiresContainer"></div>
        
        <!-- CPU ve sistemi kaldırıldı -->
        
        <!-- Antivirüs kalkanı kaldırıldı -->
        
        <!-- Zaman sayacı -->
        <div id="timer">60:00</div>
        
        <!-- Üst monitör sırası (PASSWORD) -->
        <div class="monitorRow" id="passwordRow">
            <div class="monitor password-monitor" data-index="0">?</div>
            <div class="monitor password-monitor" data-index="1">?</div>
            <div class="monitor password-monitor" data-index="2">?</div>
            <div class="monitor password-monitor" data-index="3">?</div>
            <div class="monitor password-monitor" data-index="4">?</div>
            <div class="monitor password-monitor" data-index="5">?</div>
            <div class="monitor password-monitor" data-index="6">?</div>
            <div class="monitor password-monitor" data-index="7">?</div>
            <div class="monitor password-monitor" data-index="8">?</div>
            <div class="monitor password-monitor" data-index="9">?</div>
        </div>
        
        <!-- Alt monitör sırası (Kod Modülleri) -->
        <div class="monitorRow" id="codeRow">
            <div class="monitor code-monitor" data-index="0">?</div>
            <div class="monitor code-monitor" data-index="1">?</div>
            <div class="monitor code-monitor" data-index="2">?</div>
            <div class="monitor code-monitor" data-index="3">?</div>
            <div class="monitor code-monitor" data-index="4">?</div>
            <div class="monitor code-monitor" data-index="5">?</div>
            <div class="monitor code-monitor" data-index="6">?</div>
            <div class="monitor code-monitor" data-index="7">?</div>
            <div class="monitor code-monitor" data-index="8">?</div>
            <div class="monitor code-monitor" data-index="9">?</div>
        </div>
        
        <!-- USB ve kontroller -->
        <div id="usbContainer">
            <div class="usb-row">
                <div class="side-controls">
                    <button id="leftBtn" class="btn arrowBtn">←</button>
                </div>
                <div id="usb">
                    <div id="usbIcon">&#x1F41E;</div> <!-- Böcek emojisi -->
                </div>
                <div class="side-controls">
                    <button id="rightBtn" class="btn arrowBtn">→</button>
                </div>
            </div>
            <div class="controls">
                <button id="connectBtn" class="btn">CONNECT</button>
            </div>
        </div>
    </div>

    <script>
        // Sayfa yenilendiğinde oyun sıfırlanır - bunu garanti etmek için window.onload kullanıyoruz
        window.onload = function() {
            resetGame();
            // Kabloları başlangıçta oluştur
            createWires();
            // Pencere boyutu değiştiğinde kabloları yeniden konumlandır
            window.addEventListener('resize', updateWirePositions);
            
            // Mobil cihaz kontrolü ve optimizasyonları
            checkIfMobile();
            
            // Olay dinleyicilerini ayarla
            setupEventListeners();
        };
        
        // Tüm olay dinleyicilerini ayarlama
        function setupEventListeners() {
            // Oyun başlatma/yeniden başlatma butonları
            startButton.addEventListener('click', initGame);
            restartButton.addEventListener('click', initGame);
            playAgainButton.addEventListener('click', initGame);
            
            // USB'ye tıklama için olay dinleyicisi
            usb.addEventListener('click', function() {
                if (!gameStarted || gameOver) return;
                
                if (!spinning) {
                    startSpinning();
                } else {
                    stopSpinning();
                }
            });
            
            // Sol ok tuşu - Dönüşsüz, matris yeşili kutular da seçilebilir
            leftBtn.addEventListener('click', function(e) {
                e.preventDefault();
                if (!gameStarted || gameOver) return;
                // Spinning kontrolü kaldırıldı, döngü sırasında da çalışabilir
                
                // 1. kutudan sola gidilmesini engelle
                if (selectedMonitorIndex === 0) {
                    return; // 1. kutudaysa hareketi engelle
                }
                
                // Normal olarak bir sola git
                selectedMonitorIndex = selectedMonitorIndex - 1;
                updateMonitorSelection();
            });
            
            // Sağ ok tuşu - Dönüşsüz, matris yeşili kutular da seçilebilir
            rightBtn.addEventListener('click', function(e) {
                e.preventDefault();
                if (!gameStarted || gameOver) return;
                // Spinning kontrolü kaldırıldı, döngü sırasında da çalışabilir
                
                // Son kutudan sağa gidilmesini engelle
                if (selectedMonitorIndex === 9) {
                    return; // Son kutudaysa hareketi engelle
                }
                
                // Normal olarak bir sağa git
                selectedMonitorIndex = selectedMonitorIndex + 1;
                updateMonitorSelection();
            });
            
            // Connect butonu - Sadece döngü durduğunda çalışsın
            connectBtn.addEventListener('click', function(e) {
                e.preventDefault();
                if (!gameStarted || gameOver) return;
                
                // Döngü devam ederken connect butonunu engelle
                if (spinning) {
                    return; // Döngü devam ediyorsa işlemi engelle
                }
                
                // İşlemde olup olmadığını kontrol et
                if (isConnectProcessing) {
                    return; // Zaten bir işlem yapılıyorsa engelle
                }
                
                lockSelectedMonitor();
            });
            
            // Klavye kontrolleri
            window.addEventListener('keydown', function(e) {
                if (!gameStarted || gameOver) return;
                
                switch(e.key) {
                    case 'ArrowLeft':
                        // Spinning kontrolü kaldırıldı
                        leftBtn.click(); // Sol buton kodunu kullan
                        break;
                    case 'ArrowRight':
                        // Spinning kontrolü kaldırıldı
                        rightBtn.click(); // Sağ buton kodunu kullan
                        break;
                    case 'Enter':
                    case ' ':
                        if (spinning) return; // Connect için döngü kontrolü hala aktif
                        connectBtn.click(); // Connect buton kodunu kullan
                        break;
                    case 'Escape':
                        if (!spinning) {
                            startSpinning();
                        } else {
                            stopSpinning();
                        }
                        break;
                }
            });
        }
        
        // Oyun değişkenleri
        let gameStarted = false;
        let gameOver = false;
        let currentStage = 1; // 1: Antivirüs bypass, 2: Şifre kırma
        let timer = 999; // Uzun süre
        let timerInterval;
        let selectedMonitorIndex = 0;
        let spinning = false;
        let spinningInterval = null;
        let codeModulesLocked = Array(10).fill(false);
        let passwordModulesLocked = Array(10).fill(false);
        let scorePoints = 0;
        let timeLimit = false; // Süre sınırını kapat
        let isConnectProcessing = false; // Connect butonunun işlemde olup olmadığını takip eden değişken
        
        // Doğru kod ve şifreler
        const correctCodes = ['Y', 'K', '3', 'C', '0', 'F', 'B', 'X', 'V', '9'];
        const correctPasswords = ['?', '?', '?', '?', '?', '?', '?', '?', '?', '?'];
        
        // Rastgele karakter oluşturma
        function getRandomChar() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            return chars[Math.floor(Math.random() * chars.length)];
        }
        
        // DOM Elementleri
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const winScreen = document.getElementById('winScreen');
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');
        const playAgainButton = document.getElementById('playAgainButton');
        const timerElement = document.getElementById('timer');
        const codeMonitors = document.querySelectorAll('#codeRow .monitor');
        const passwordMonitors = document.querySelectorAll('#passwordRow .monitor');
        const miniShields = document.querySelectorAll('.miniShield');
        const usb = document.getElementById('usb');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');
        const connectBtn = document.getElementById('connectBtn');
        
        // Oyunu tamamen sıfırla
        function resetGame() {
            // Tüm değişkenleri başlangıç durumuna getir
            gameStarted = false;
            gameOver = false;
            currentStage = 1;
            timer = 999;
            selectedMonitorIndex = 0;
            spinning = false;
            
            if (spinningInterval) {
                clearInterval(spinningInterval);
                spinningInterval = null;
            }
            
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            codeModulesLocked = Array(10).fill(false);
            passwordModulesLocked = Array(10).fill(false);
            scorePoints = 0;
            
            // Başlangıç ekranını göster
            startScreen.style.display = 'flex';
            gameOverScreen.style.display = 'none';
            winScreen.style.display = 'none';
            
            // Tüm modülleri sıfırla
            codeMonitors.forEach(monitor => {
                monitor.textContent = '?';
                monitor.classList.remove('selected', 'locked', 'correct', 'just-locked', 'correct-value');
            });
            
            passwordMonitors.forEach(monitor => {
                monitor.classList.remove('selected', 'locked', 'correct', 'just-locked', 'correct-value');
            });
            
            miniShields.forEach(shield => {
                shield.classList.remove('active');
            });
            
            // Zamanlayıcıyı sıfırla
            updateTimer();
            
            // Kabloları sıfırla
            resetWires();
        }
        
        // Oyunu başlat
        function initGame() {
            // Oyunu önce sıfırla
            resetGame();
            
            // Oyun ekranlarını ayarla
            startScreen.style.display = 'none';
            
            // Oyunu başlat
            gameStarted = true;
            
            // Zamanlayıcıyı başlat (süre sınırı açıksa)
            if (timeLimit) {
                timerInterval = setInterval(updateTimer, 1000);
            }
            
            // İlk aşama için monitörleri ayarla
            updateMonitorSelection();
        }
        
        // Zamanlayıcıyı güncelle
        function updateTimer() {
            if (timeLimit && timer <= 0) {
                // Süre doldu, oyun bitti
                endGame(false);
                return;
            }
            
            if (timeLimit) {
                timer--;
            }
            
            const minutes = Math.floor(timer / 60);
            const seconds = timer % 60;
            timerElement.textContent = timeLimit ? 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}` : 
                "∞"; // Sonsuz sembolü
        }
        
        // Monitörleri sıfırla
        function resetModules() {
            // Kod modüllerini sıfırla
            codeMonitors.forEach(monitor => {
                monitor.textContent = '?';
                monitor.classList.remove('selected', 'locked');
            });
            
            // Şifre modüllerini sıfırla
            passwordMonitors.forEach(monitor => {
                monitor.classList.remove('selected', 'locked');
            });
            
            // Kalkanları sıfırla
            miniShields.forEach(shield => {
                shield.classList.remove('active');
            });
            
            codeMonitors[0].classList.add('selected');
        }
        
        // Monitör seçimini güncelle
        function updateMonitorSelection() {
            const currentRow = currentStage === 1 ? codeMonitors : passwordMonitors;
            const lockedArray = currentStage === 1 ? codeModulesLocked : passwordModulesLocked;
            
            // Tüm seçimleri kaldır
            currentRow.forEach(monitor => {
                monitor.classList.remove('selected');
                // Renk tutarlılığı için correct-value sınıfını korumalıyız, onu kaldırmıyoruz
            });
            
            // Tüm kabloları deaktif yap
            resetWireActiveStatus();
            
            // Yeni seçili monitörü işaretle
            currentRow[selectedMonitorIndex].classList.add('selected');
            
            // İlgili kabloyu aktif yap
            if (currentStage === 1) {
                const wire = document.getElementById(`wire-${selectedMonitorIndex}`);
                if (wire) {
                    wire.classList.add('active');
                }
            }
        }
        
        // Slot makinesi efekti başlat
        function startSpinning() {
            if (spinning) return; // Zaten dönüyor
            
            // Connect işlem flag'ini resetle çünkü döngü yeniden başlıyor
            isConnectProcessing = false;
            
            spinning = true;
            usb.classList.add('active');
            
            const row = currentStage === 1 ? codeMonitors : passwordMonitors;
            const lockedArray = currentStage === 1 ? codeModulesLocked : passwordModulesLocked;
            
            // Slot başlarken tüm kutucuklardan doğru değer vurgusunu kaldır (rengi fuşyaya döndür)
            row.forEach((monitor) => {
                if (!monitor.classList.contains('locked')) {
                    monitor.classList.remove('correct-value');
                }
            });
            
            // Tüm kalkanları sıfırla - slot başlangıcında
            document.querySelectorAll('.miniShield').forEach(shield => {
                shield.classList.remove('matrix-green');
            });
            
            // Karakter değişimi için döngü - otomatik durma özelliği kaldırıldı
            spinningInterval = setInterval(() => {
                // Kilitlenmemiş modülleri güncelle
                row.forEach((monitor, index) => {
                    if (!lockedArray[index]) {
                        // Değişim hızını yarıya indirmek için ek rastgele kontrol
                        if (Math.random() > 0.5) {
                            monitor.textContent = getRandomChar();
                        }
                        
                        // Doğru değere yaklaşma şansını arttır - küçük bir şans
                        const correctValue = currentStage === 1 ? 
                            correctCodes[index] : correctPasswords[index];
                        
                        if (Math.random() < 0.05) { // %5 ihtimalle doğru değeri göster
                            monitor.textContent = correctValue;
                        }
                    }
                });
            }, 100); // 100ms aralıklarla güncelleme
            
            // NOT: Otomatik durma kodu kaldırıldı
        }
        
        // Döndürmeyi durdur ve ipuçlarını göster
        function stopSpinning() {
            if (!spinning) return; // Zaten durmuş
            
            spinning = false;
            usb.classList.remove('active');
            
            if (spinningInterval) {
                clearInterval(spinningInterval);
                spinningInterval = null;
            }
            
            const row = currentStage === 1 ? codeMonitors : passwordMonitors;
            const correctValues = currentStage === 1 ? correctCodes : correctPasswords;
            
            // Kutucukların içeriğini rastgele değerlerle doldur, doğru değerleri değiştirme
            row.forEach((monitor, index) => {
                if (!monitor.classList.contains('locked')) {
                    // "correct-value" sınıfını tamamen kaldır, kutuların rengini değiştirmeyelim
                    monitor.classList.remove('correct-value');
                    
                    // Rastgele değer ata veya doğru değeri koru, ama görünümü değiştirme
                    if (monitor.textContent !== correctValues[index]) {
                        monitor.textContent = getRandomChar();
                        // Doğru karakterle aynı olmamasını sağla
                        while (monitor.textContent === correctValues[index]) {
                            monitor.textContent = getRandomChar();
                        }
                    }
                }
            });
            
            // İkili grupların doğruluğunu kontrol et ve ilgili kalkanları güncelle
            checkPairCorrectness();
        }
        
        // İkili grupların doğruluğunu kontrol et ve ilgili kalkanları güncelle
        function checkPairCorrectness() {
            const row = currentStage === 1 ? codeMonitors : passwordMonitors;
            const correctValues = currentStage === 1 ? correctCodes : correctPasswords;
            
            // Önce tüm kalkanları temizle
            document.querySelectorAll('.miniShield').forEach(shield => {
                shield.classList.remove('matrix-green');
            });
            
            // Her kalkan için kontrolü yap
            // shield-0: 0. kutu veya 1. kutu
            // shield-1: 1. kutu veya 2. kutu 
            // shield-2: 2. kutu veya 3. kutu
            // ...vb.
            
            for (let i = 0; i < 9; i++) {
                const shieldId = `shield-${i}`;
                const shield = document.getElementById(shieldId);
                
                if (!shield) continue; // Kalkan bulunamazsa atla
                
                // Kalkanla ilişkili kutular - kalkan numarası ve kalkan numarası+1
                const firstBoxIndex = i;
                const secondBoxIndex = i + 1;
                
                // İki kutudan en az birinde doğru değer var mı kontrol et
                const firstMatches = !row[firstBoxIndex].classList.contains('locked') && 
                    row[firstBoxIndex].textContent === correctValues[firstBoxIndex];
                const secondMatches = !row[secondBoxIndex].classList.contains('locked') && 
                    row[secondBoxIndex].textContent === correctValues[secondBoxIndex];
                
                // Eğer ikisinden en az biri doğru ise ve kilitli değilse kalkanı yeşil yap
                if (firstMatches || secondMatches) {
                    console.log(`Kalkan ${shieldId} yeşil olacak, çünkü ${firstBoxIndex+1} veya ${secondBoxIndex+1} kutusunda doğru değer var`);
                    shield.classList.add('matrix-green');
                }
            }
        }
        
        // Seçili monitörü kilitle
        function lockSelectedMonitor() {
            if (!gameStarted || gameOver || spinning || isConnectProcessing) return;
            
            // Connect butonunun yeniden kullanılmasını engellemek için flag'i aktif et
            isConnectProcessing = true;
            
            const row = currentStage === 1 ? codeMonitors : passwordMonitors;
            const lockedArray = currentStage === 1 ? codeModulesLocked : passwordModulesLocked;
            const correctValues = currentStage === 1 ? correctCodes : correctPasswords;
            
            // Doğru karakter mi kontrolü
            if (row[selectedMonitorIndex].textContent === correctValues[selectedMonitorIndex]) {
                // Doğru karakter ise kilitle
                row[selectedMonitorIndex].classList.add('locked');
                lockedArray[selectedMonitorIndex] = true;
                
                scorePoints += 10;
                row[selectedMonitorIndex].classList.add('correct'); // Yeşil renk için
                
                // Kilitleme animasyonu
                row[selectedMonitorIndex].classList.add('just-locked');
                setTimeout(() => {
                    row[selectedMonitorIndex].classList.remove('just-locked');
                    
                    // İşlem tamamlandığında flag'i resetle
                    setTimeout(() => {
                        isConnectProcessing = false;
                    }, 200); // Minimum 200ms bekle
                }, 500);
                
                // İkili grupları tekrar kontrol et
                checkPairCorrectness();
                
                // Tüm monitörler kilitlendi mi kontrol et
                if (lockedArray.every(locked => locked)) {
                    // Aşama 1 tamamlandığında oyunu bitir
                    endGame(true);
                }
                
                // Bu kısmı yorum haline getiriyoruz - artık otomatik geçiş olmayacak
                /*
                let nextIndex = (selectedMonitorIndex + 1) % 10;
                let count = 0;
                
                while (lockedArray[nextIndex] && count < 10) {
                    nextIndex = (nextIndex + 1) % 10;
                    count++;
                }
                
                if (count < 10) {
                    selectedMonitorIndex = nextIndex;
                    updateMonitorSelection();
                }
                */
            } else {
                // Doğru karakter değilse, döngüyü tekrar başlat
                startSpinning();
                
                // İşlem tamamlandığında flag'i resetle
                setTimeout(() => {
                    isConnectProcessing = false;
                }, 500); // Minimum 500ms bekle
            }
        }
        
        // Oyunu bitir
        function endGame(win) {
            gameStarted = false;
            gameOver = true;
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // Skor hesaplaması
            const correctlyLocked = calculateCorrectlyLocked();
            const timeBonus = timeLimit ? timer * 2 : 0;
            const totalScore = scorePoints + timeBonus + (correctlyLocked * 5);
            
            if (win) {
                document.querySelector('#winScreen .screenText').innerHTML = 
                    `Skorunuz: ${totalScore}<br>
                    Doğru kombinasyonlar: ${correctlyLocked}<br>
                    ${timeLimit ? `Kalan süre bonusu: ${timeBonus}` : ''}`;
                winScreen.style.display = 'flex';
            } else {
                document.querySelector('#gameOverScreen .screenText').innerHTML = 
                    `Skorunuz: ${scorePoints}<br>
                    ${timeLimit ? 'Süre doldu!' : ''} Tekrar denemek ister misiniz?`;
                gameOverScreen.style.display = 'flex';
            }
        }
        
        // Doğru kilitlenmiş kombinasyonları hesapla
        function calculateCorrectlyLocked() {
            let correct = 0;
            
            // 1. aşamada doğru kilitlenmiş sayısı
            for (let i = 0; i < 10; i++) {
                const codeMonitor = codeMonitors[i];
                if (codeMonitor.classList.contains('locked') && codeMonitor.textContent === correctCodes[i]) {
                    correct++;
                }
            }
            
            // 2. aşamada doğru kilitlenmiş sayısı
            if (currentStage === 2) {
                for (let i = 0; i < 10; i++) {
                    const passwordMonitor = passwordMonitors[i];
                    if (passwordMonitor.classList.contains('locked') && passwordMonitor.textContent === correctPasswords[i]) {
                        correct++;
                    }
                }
            }
            
            return correct;
        }
        
        // ===== Kablo Fonksiyonları =====
        
        // Kabloları oluştur
        function createWires() {
            const wiresContainer = document.getElementById('wiresContainer');
            wiresContainer.innerHTML = '';
            
            const passwordRow = document.getElementById('passwordRow');
            const codeRow = document.getElementById('codeRow');
            
            const passwordMonitors = passwordRow.querySelectorAll('.monitor');
            const codeMonitors = codeRow.querySelectorAll('.monitor');
            
            // Her bir PASSWORD monitöründen kod monitörüne kablo çiz
            for (let i = 0; i < passwordMonitors.length; i++) {
                // Kablo oluştur
                const wire = document.createElement('div');
                wire.className = 'wire';
                wire.id = `wire-${i}`;
                wiresContainer.appendChild(wire);
                
                // Kablo konumunu ayarla
                updateWirePosition(wire, passwordMonitors[i], codeMonitors[i]);
            }
            
            // Mobil cihaz kontrolü
            const isMobile = window.innerWidth <= 767;
            // Mobil cihazlar için offset değeri
            const offsetY = isMobile ? 10 : 0;
            
            // Antivirüs ikonlarını kabloların arasına yerleştir - sadece görsel amaçlı
            for (let i = 1; i < passwordMonitors.length; i++) {
                // Sağ kablo pozisyonunu al
                const rightWire = document.getElementById(`wire-${i}`);
                const leftWire = document.getElementById(`wire-${i-1}`);
                
                if (rightWire && leftWire) {
                    // Kabloların pozisyonlarını al
                    const rightRect = rightWire.getBoundingClientRect();
                    const leftRect = leftWire.getBoundingClientRect();
                    const containerRect = document.getElementById('gameContainer').getBoundingClientRect();
                    
                    // Kabloların üst pozisyonlarının ortalaması
                    const midX = (rightRect.left + leftRect.left) / 2 + (rightRect.width + leftRect.width) / 4 - containerRect.left;
                    
                    // Üst monitör ile alt monitör arasındaki mesafenin ortası
                    const upperRect = passwordMonitors[i].getBoundingClientRect();
                    const lowerRect = codeMonitors[i].getBoundingClientRect();
                    
                    // Mobil cihazlarda kalkanlar için biraz daha fazla boşluk bırak
                    const midY = (upperRect.bottom + lowerRect.top) / 2 - containerRect.top + offsetY;
                    
                    // Antivirüs ikonunu oluştur
                    const miniShield = document.createElement('div');
                    miniShield.className = 'miniShield';
                    miniShield.id = `shield-${i-1}`;
                    miniShield.style.left = `${midX}px`;
                    miniShield.style.top = `${midY}px`;
                    wiresContainer.appendChild(miniShield);
                }
            }
        }
        
        // Kablo pozisyonlarını güncelle
        function updateWirePositions() {
            const passwordRow = document.getElementById('passwordRow');
            const codeRow = document.getElementById('codeRow');
            
            const passwordMonitors = passwordRow.querySelectorAll('.monitor');
            const codeMonitors = codeRow.querySelectorAll('.monitor');
            
            for (let i = 0; i < passwordMonitors.length; i++) {
                const wire = document.getElementById(`wire-${i}`);
                if (wire) {
                    updateWirePosition(wire, passwordMonitors[i], codeMonitors[i]);
                }
            }
            
            // Antivirüs ikonlarını yeniden konumlandır
            for (let i = 1; i < passwordMonitors.length; i++) {
                const shield = document.getElementById(`shield-${i-1}`);
                const rightWire = document.getElementById(`wire-${i}`);
                const leftWire = document.getElementById(`wire-${i-1}`);
                
                if (shield && rightWire && leftWire) {
                    // Kabloların pozisyonlarını al
                    const rightRect = rightWire.getBoundingClientRect();
                    const leftRect = leftWire.getBoundingClientRect();
                    const containerRect = document.getElementById('gameContainer').getBoundingClientRect();
                    
                    // Kabloların üst pozisyonlarının ortalaması
                    const midX = (rightRect.left + leftRect.left) / 2 + (rightRect.width + leftRect.width) / 4 - containerRect.left;
                    
                    // Üst monitör ile alt monitör arasındaki mesafenin ortası
                    const upperRect = passwordMonitors[i].getBoundingClientRect();
                    const lowerRect = codeMonitors[i].getBoundingClientRect();
                    const midY = (upperRect.bottom + lowerRect.top) / 2 - containerRect.top;
                    
                    // Kalkan pozisyonunu güncelle
                    shield.style.left = `${midX}px`;
                    shield.style.top = `${midY}px`;
                }
            }
        }
        
        // Tek bir kablonun pozisyonunu güncelle
        function updateWirePosition(wireElement, topMonitor, bottomMonitor) {
            // Üst ve alt monitörlerin pozisyon bilgilerini al
            const topRect = topMonitor.getBoundingClientRect();
            const bottomRect = bottomMonitor.getBoundingClientRect();
            const containerRect = document.getElementById('gameContainer').getBoundingClientRect();
            
            // Kablonun başlangıç ve bitiş noktaları
            const startX = topRect.left + topRect.width / 2 - containerRect.left;
            const startY = topRect.bottom - containerRect.top + 5; // 5 piksel aşağıdan başlat
            const endX = bottomRect.left + bottomRect.width / 2 - containerRect.left;
            const endY = bottomRect.top - containerRect.top - 5; // 5 piksel yukarıda bitir
            
            // Yatay fark
            const dx = endX - startX;
            // Dikey mesafe - mobil cihazlarda daha fazla mesafe olabilir
            const length = endY - startY;
            
            // Mobil cihazda ise ve dikey mesafe çok kısaysa minimum bir değer ayarla
            const isMobile = window.innerWidth <= 767;
            const minLength = isMobile ? 40 : 20; // Mobil için minimum 40px, değilse 20px
            const actualLength = Math.max(length, minLength);
            
            // Kablo stillerini ayarla
            wireElement.style.left = `${startX}px`;
            wireElement.style.top = `${startY}px`;
            
            if (Math.abs(dx) < 2) {
                // Tam dikey kablo (üst üste monitörler)
                wireElement.style.height = `${actualLength}px`;
                wireElement.style.width = `4px`;
                wireElement.style.transform = 'none';
            } else {
                // Eğimli kablo için gerçek uzunluk
                const adjustedLength = Math.sqrt(dx * dx + actualLength * actualLength);
                // Açı hesaplaması: 0 derece = düz yukarı, pozitif = sağa eğimli, negatif = sola eğimli
                const angle = Math.atan2(dx, actualLength) * (180 / Math.PI);
                
                wireElement.style.height = `${adjustedLength}px`;
                wireElement.style.width = `4px`;
                wireElement.style.transformOrigin = 'top center';
                wireElement.style.transform = `rotate(${angle}deg)`;
            }
        }
        
        // Tüm kabloları sıfırla
        function resetWires() {
            const wires = document.querySelectorAll('.wire');
            wires.forEach(wire => {
                wire.classList.remove('active');
                // success sınıfı kaldırıldı, tüm kablolar fuşya renginde kalacak
            });
            
            // Mini kalkanları sıfırlamaya gerek yok, artık sadece görsel öğeler
        }
        
        // Tüm kabloların active durumunu sıfırla
        function resetWireActiveStatus() {
            const wires = document.querySelectorAll('.wire');
            wires.forEach(wire => {
                wire.classList.remove('active');
                // success sınıfı kontrol etme işlemi kaldırıldı
            });
        }
        
        // Mobil cihaz kontrolü
        function checkIfMobile() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768;
            
            if (isMobile) {
                // Mobil için touch olayları ekleyelim
                addTouchEvents();
                
                // Kabloları mobil için optimize et
                optimizeForMobile();
                
                // Orientasyon değişikliğini izle
                window.addEventListener('orientationchange', handleOrientationChange);
            }
        }
        
        // Orientasyon değişikliğini yönet
        function handleOrientationChange() {
            // Orientasyon değişikliğinden sonra kısa bir gecikme ile yeniden düzenle
            setTimeout(() => {
                updateWirePositions();
                optimizeForMobile();
                
                // Yatay modda layout'u daha iyi hale getir
                if (window.innerWidth > window.innerHeight) {
                    // Yatay mod - daha kompakt görünüm
                    document.querySelectorAll('.monitorRow').forEach(row => {
                        row.style.margin = '10px 0';
                    });
                    
                    document.getElementById('timer').style.margin = '15px 0 10px 0';
                } else {
                    // Dikey mod - normal görünüm
                    if (window.innerWidth < 480) {
                        document.querySelectorAll('.monitorRow').forEach(row => {
                            row.style.margin = '10px 0';
                        });
                        document.getElementById('timer').style.margin = '20px 0 15px 0';
                    } else {
                        document.querySelectorAll('.monitorRow').forEach(row => {
                            row.style.margin = '15px 0';
                        });
                        document.getElementById('timer').style.margin = '25px 0 20px 0';
                    }
                }
            }, 300); // Küçük bir gecikme ile yeniden düzenle
        }
        
        // Touch olayları ekle
        function addTouchEvents() {
            // USB butonuna dokunma olayı
            usb.addEventListener('touchstart', function(e) {
                e.preventDefault(); // Varsayılan dokunma davranışını engelle
                if (!gameStarted || gameOver) return;
                
                if (!spinning) {
                    startSpinning();
                } else {
                    stopSpinning();
                }
            });
            
            // Sol, sağ ve bağlan butonları için touch olayları
            leftBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                if (!gameStarted || gameOver || spinning) return;
                
                selectedMonitorIndex = (selectedMonitorIndex - 1 + 10) % 10;
                updateMonitorSelection();
            });
            
            rightBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                if (!gameStarted || gameOver || spinning) return;
                
                selectedMonitorIndex = (selectedMonitorIndex + 1) % 10;
                updateMonitorSelection();
            });
            
            connectBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                if (!gameStarted || gameOver || spinning) return;
                
                lockSelectedMonitor();
            });
        }
        
        // Mobil cihazlar için optimize et
        function optimizeForMobile() {
            // Performans iyileştirmeleri
            const wires = document.querySelectorAll('.wire');
            wires.forEach(wire => {
                wire.style.boxShadow = '0 0 3px #ff00aa'; // Gölgeleri azalt (performans için)
            });
            
            // Oyun ekranları için metin boyutlarını uyarla
            const gameScreens = document.querySelectorAll('.gameScreen');
            gameScreens.forEach(screen => {
                const title = screen.querySelector('.screenTitle');
                const text = screen.querySelector('.screenText');
                
                if (title && window.innerWidth < 480) {
                    title.style.fontSize = '24px';
                }
                
                if (text && window.innerWidth < 480) {
                    text.style.fontSize = '14px';
                    text.style.maxWidth = '90%';
                }
            });
        }
    </script>
</body>
</html> 
