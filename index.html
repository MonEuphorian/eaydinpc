<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CSI: Digital Evidence Unit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000;
            font-family: 'Roboto Mono', monospace;
            color: #fff;
            position: relative;
        }

        /* Grid arka plan - cyberpunk stil */
        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(255, 0, 128, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
            z-index: 1;
        }

        /* Ana oyun konteyneri */
        #gameContainer {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            z-index: 2;
            background-color: #000;
        }

        /* Timer */
        #timer {
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 95vw;
            margin: 10px auto;
            padding: 0 12px;
            box-sizing: border-box;
            word-break: break-all;
        }

        /* Monitör grupları */
        .monitorGrid {
            width: 100%;
            max-width: 100%;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
            padding: 0 10px;
            margin-top: 48px;
        }

        .monitorRow {
            display: flex;
            justify-content: center;
            gap: 10px;
            width: 100%;
            max-width: 600px;
        }

        /* Üst ve alt kutular arasındaki mesafeyi artır */
        #passwordRow {
            margin-bottom: 60px;
        }

        /* Monitör stilleri */
        .monitor {
            width: min(8.5vw, 50px);
            height: min(8.5vw, 50px);
            border: 2px solid;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: min(4vw, 24px);
            font-weight: bold;
            background: rgba(10, 10, 15, 0.9);
            position: relative;
            transition: all 0.3s ease;
            text-shadow: 0 0 5px currentColor;
        }

        .password-monitor {
            border-color: #00ffff;
            color: #00ffff;
            box-shadow: 0 0 5px rgba(0, 255, 255, 0.3);
        }

        .code-monitor {
            border-color: #ff2e6d;
            color: #ff2e6d;
            box-shadow: 0 0 5px rgba(255, 46, 109, 0.3);
        }

        /* Sadece alt monitörlerde (codeRow) seçim efekti olacak */
        .code-monitor.selected {
            border-color: #00ffe0 !important;
            box-shadow: 0 0 24px #00ffe0, 0 0 8px #00ffe0;
            background: rgba(0,255,224,0.10);
            color: #00ffe0;
            transform: scale(1.13);
            z-index: 10;
        }
        /* Üst monitörlerde seçim efekti olmasın */
        .password-monitor.selected {
            border-color: inherit;
            box-shadow: none;
            background: inherit;
            color: inherit;
            transform: none;
            z-index: 1;
        }

        /* Kontrol paneli */
        #controlPanel {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 96px;
            z-index: 10;
            width: 100vw;
            max-width: 100vw;
            padding: 10px 0 0 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            background-color: #000;
            box-shadow: 0 -2px 24px 0 rgba(0,0,0,0.5);
        }

        /* Kontrol panelinin üstündeki yatay çizgi */
        .control-separator {
            width: 100vw;
            height: 2px;
            background: linear-gradient(90deg, transparent 0%, #00ffff 40%, #00ffff 60%, transparent 100%);
            box-shadow: 0 0 8px #00ffff, 0 0 2px #fff;
            margin-bottom: 18px;
            border: none;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 20;
        }

        .controlRow {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 500px;
            gap: 8px;
        }

        /* Kontrol butonları */
        #usb {
            width: min(30vw, 120px);
            height: min(30vw, 120px);
            border: 3px solid #ff2e6d;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(10, 10, 15, 0.9);
            font-size: min(10vw, 40px);
            box-shadow: 0 0 10px rgba(255, 46, 109, 0.3);
        }

        #usb.active {
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            color: #00ffff;
        }

        .arrowBtn {
            width: min(20vw, 80px);
            height: min(20vw, 80px);
            border: 2px solid #00ffff;
            background: rgba(10, 10, 15, 0.9);
            color: #00ffff;
            font-size: min(8vw, 32px);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
            margin-left: 16px;
            margin-right: 16px;
        }

        #connectBtn {
            width: min(80vw, 300px);
            height: min(15vw, 60px);
            border: 2px solid #00ffff;
            background: rgba(10, 10, 15, 0.9);
            color: #00ffff;
            font-size: min(5vw, 24px);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 2px;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        /* Kalkan simgeleri */
        .shield {
            width: min(5vw, 25px);
            height: min(5vw, 25px);
            border: 2px solid #00ffff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            background: rgba(10, 10, 15, 0.9);
            transition: all 0.3s ease;
            font-size: min(3vw, 14px);
            color: #00ffff;
        }

        .shield.active {
            border-color: #ff2e6d;
            color: #ff2e6d;
            box-shadow: 0 0 10px rgba(255, 46, 109, 0.5);
        }

        /* Oyun ekranları */
        .gameScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(10, 10, 15, 0.95);
            z-index: 100;
            gap: 30px;
            padding: 20px;
        }

        .screenTitle {
            font-size: min(8vw, 48px);
            color: #00ffff;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .screenText {
            font-size: min(4vw, 24px);
            color: #fff;
            text-align: center;
            max-width: 600px;
            line-height: 1.5;
            padding: 0 20px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        .bigBtn {
            padding: 15px 40px;
            border: 3px solid #00ffff;
            background: rgba(10, 10, 15, 0.9);
            color: #00ffff;
            font-size: min(5vw, 24px);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 2px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }

        .hidden {
            display: none !important;
        }

        /* Aktif durum efektleri */
        .monitor.selected,
        .arrowBtn:active,
        #connectBtn:active,
        #usb:active,
        .bigBtn:active {
            transform: scale(0.95);
        }

        /* Dokunmatik cihazlar için hover efektleri */
        @media (hover: hover) {
            .arrowBtn:hover,
            #connectBtn:hover,
            .bigBtn:hover {
                background: rgba(0, 255, 255, 0.1);
                box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            }

            #usb:hover {
                background: rgba(255, 46, 109, 0.1);
                box-shadow: 0 0 20px rgba(255, 46, 109, 0.5);
            }
        }

        /* Küçük ekranlar için optimizasyonlar */
        @media (max-height: 667px) {
            #gameContainer {
                padding: 10px;
            }

            .monitorGrid {
                gap: 15px;
            }

            #controlPanel {
                padding: 10px;
            }
        }

        /* ShieldRow ve shield-wrapper için yeni CSS */
        .shieldRow {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            min-height: 30px;
            position: relative;
            z-index: 2;
        }
        .shield-wrapper {
            flex: 1 1 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Oyun alanı ile kontrol paneli arasında boşluk bırak */
        #gameArea {
            padding-bottom: 120px;
        }
        @media (max-width: 600px) {
            #controlPanel {
                padding-bottom: 0;
                min-height: 120px;
                bottom: 96px;
            }
            #gameArea {
                padding-bottom: 140px;
            }
            #timer {
                margin-top: 32px;
            }
            .monitorGrid {
                margin-top: 96px;
            }
            .controlRow {
                gap: 2px;
            }
            .arrowBtn {
                margin-left: 24px;
                margin-right: 24px;
            }
            .gameField {
                margin-bottom: 140px;
            }
            #passwordRow {
                margin-bottom: 60px;
            }
        }

        /* Dikey kablo (wire) stilleri */
        .monitor-vertical-wire {
            position: absolute;
            width: 2px;
            background: #222;
            border-radius: 1px;
            z-index: 1;
            pointer-events: none;
            box-shadow: 0 0 8px #000, 0 2px 8px #444;
        }

        /* Shield ikonları (kabloların ortasında, fuşya) */
        .shield-icon {
            position: absolute;
            width: 28px;
            height: 28px;
            left: 0;
            top: 0;
            z-index: 3;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
        .shield-icon svg {
            width: 28px;
            height: 28px;
            display: block;
        }
        .shield-icon .shield-shape {
            fill: #1a0010;
            stroke: #ff2e6d;
            stroke-width: 2.5px;
            filter: drop-shadow(0 0 8px #ff2e6d);
        }

        /* Shield altından cyan çizgiye inen beyaz kablo */
        .shield-down-wire {
            position: absolute;
            width: 1px;
            background: #222;
            box-shadow: none;
            opacity: 0.5;
            z-index: 2;
            left: 0;
            top: 0;
            pointer-events: none;
            border-radius: 1px;
        }

        /* Oyun alanı (kutular ve kablolar) için ortalama kapsayıcı */
        .gameField {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1 1 auto;
            min-height: 0;
            height: 100%;
            margin-bottom: 140px;
        }
        #gameArea {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding-bottom: 120px;
        }
        @media (max-width: 600px) {
            .gameField {
                min-height: 0;
                height: 100%;
                justify-content: center;
                margin-bottom: 140px;
            }
            #gameArea {
                padding-bottom: 140px;
            }
            #controlPanel {
                bottom: 96px;
            }
        }

        /* Animasyonlu antivirüs dairesi (yeni timer) */
        #antivirusCircle {
            position: absolute;
            top: 48px;
            left: 50%;
            transform: translateX(-50%);
            width: 110px;
            height: 110px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;
        }
        #antivirusCircle svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 110px;
            height: 110px;
        }
        #antivirusTime {
            position: relative;
            color: #00ffe0;
            font-size: 2.8rem;
            font-family: 'Digital-7', 'Roboto Mono', monospace;
            font-weight: bold;
            text-align: center;
            width: 110px;
            line-height: 110px;
            z-index: 2;
            text-shadow: 0 0 12px #00ffe0, 0 0 2px #fff;
            pointer-events: none;
        }
        #antivirusSpinnerInner {
            stroke: #00ffe0;
            filter: drop-shadow(0 0 8px #00ffe0);
            transform-origin: 55px 55px;
            animation: antivirus-spin 2s linear infinite;
        }
        #antivirusSpinnerOuter {
            stroke: #00ffe0;
            filter: drop-shadow(0 0 8px #00ffe0);
            transform-origin: 55px 55px;
            animation: antivirus-spin-reverse 3s linear infinite;
            opacity: 0.7;
        }
        @keyframes antivirus-spin {
            100% { transform: rotate(360deg); }
        }
        @keyframes antivirus-spin-reverse {
            100% { transform: rotate(-360deg); }
        }
        @media (max-width: 600px) {
            #antivirusCircle {
                width: 80px;
                height: 80px;
                top: 28px;
            }
            #antivirusCircle svg {
                width: 80px;
                height: 80px;
            }
            #antivirusTime {
                font-size: 1.7rem;
                width: 80px;
                line-height: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="grid-overlay"></div>
    
    <div id="gameContainer">
        <!-- Başlangıç ekranı -->
        <div id="startScreen" class="gameScreen">
            <h1 class="screenTitle">CSI: Digital Evidence Unit</h1>
            <p class="screenText">Şüpheli cihazın şifresini kırın ve delillere ulaşın. Her deneme için 60 saniyeniz var.</p>
            <button id="startButton" class="bigBtn">BAŞLAT</button>
        </div>

        <!-- Ana oyun alanı -->
        <div id="gameArea" class="hidden">
            <div class="gameField">
                <div class="monitorGrid">
                    <div class="monitorRow" id="passwordRow">
                        <!-- Şifre monitörleri JavaScript ile eklenecek -->
                    </div>
                    <div class="monitorRow" id="codeRow">
                        <!-- Kod monitörleri JavaScript ile eklenecek -->
                    </div>
                </div>
            </div>

            <div id="controlPanel">
                <div class="control-separator"></div>
                <div class="controlRow">
                    <button id="leftBtn" class="arrowBtn">←</button>
                    <div id="usb">
                        <div id="usbIcon">⚡</div>
                    </div>
                    <button id="rightBtn" class="arrowBtn">→</button>
                </div>
                <button id="connectBtn">BAĞLAN</button>
            </div>

            <!-- Animasyonlu antivirüs dairesi (yeni timer) -->
            <div id="antivirusCircle">
                <svg width="110" height="110" viewBox="0 0 110 110">
                    <circle cx="55" cy="55" r="48" stroke="#00ffe0" stroke-width="3" fill="none" opacity="0.15"/>
                    <circle id="antivirusSpinnerOuter" cx="55" cy="55" r="48" stroke="#00ffe0" stroke-width="3" fill="none" stroke-linecap="round" stroke-dasharray="80 220"/>
                    <circle cx="55" cy="55" r="38" stroke="#00ffe0" stroke-width="4" fill="none" opacity="0.15"/>
                    <circle id="antivirusSpinnerInner" cx="55" cy="55" r="38" stroke="#00ffe0" stroke-width="4" fill="none" stroke-linecap="round" stroke-dasharray="60 180"/>
                </svg>
                <div id="antivirusTime">60</div>
            </div>
        </div>

        <!-- Oyun sonu ekranı -->
        <div id="gameOverScreen" class="gameScreen hidden">
            <h1 class="screenTitle">ERİŞİM BAŞARISIZ</h1>
            <p class="screenText">Güvenlik sistemi erişimi engelledi. Yeni bir deneme başlatın.</p>
            <button id="restartButton" class="bigBtn">TEKRAR DENE</button>
        </div>

        <!-- Kazanma ekranı -->
        <div id="winScreen" class="gameScreen hidden">
            <h1 class="screenTitle">ERİŞİM BAŞARILI</h1>
            <p class="screenText">Şifre kırıldı. Kalan süre: <span id="remainingTime">00:00</span></p>
            <button id="nextLevelButton" class="bigBtn">DEVAM ET</button>
        </div>
    </div>

    <script>
        // Oyun değişkenleri
        let gameStarted = false;
        let timer = 60;
        let timerInterval;
        let selectedMonitorIndex = 0;
        let currentLevel = 1;
        let isUSBActive = false;
        let antivirusTime = 60;

        // DOM elementleri
        const gameArea = document.getElementById('gameArea');
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const winScreen = document.getElementById('winScreen');
        const timerElement = document.getElementById('timer');
        const passwordRow = document.getElementById('passwordRow');
        const codeRow = document.getElementById('codeRow');
        const usb = document.getElementById('usb');
        const connectBtn = document.getElementById('connectBtn');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');

        // Monitörleri oluştur
        function createMonitors() {
            // Önce mevcut monitörleri temizle
            passwordRow.innerHTML = '';
            codeRow.innerHTML = '';
            // Eski shield'ları ve kabloları temizle
            document.querySelectorAll('.shield').forEach(shield => shield.remove());
            document.querySelectorAll('.monitor-vertical-wire').forEach(wire => wire.remove());
            document.querySelectorAll('.shield-icon').forEach(icon => icon.remove());
            document.querySelectorAll('.shield-down-wire').forEach(wire => wire.remove());

            for(let i = 0; i < 9; i++) {
                // Şifre monitörleri
                const passwordMonitor = document.createElement('div');
                passwordMonitor.className = 'monitor password-monitor';
                passwordMonitor.textContent = '?';
                passwordMonitor.dataset.index = i;
                passwordRow.appendChild(passwordMonitor);

                // Kod monitörleri
                const codeMonitor = document.createElement('div');
                codeMonitor.className = 'monitor code-monitor';
                codeMonitor.textContent = '?';
                codeMonitor.dataset.index = i;
                codeRow.appendChild(codeMonitor);
            }

            // Dikey kabloları ve shield'ları doğru konumlandır
            setTimeout(() => {
                positionVerticalWires();
                positionShields();
            }, 0);
            updateSelection();
        }

        // Monitör seçimini güncelle (sadece codeRow'da seçim efekti uygula)
        function updateSelection() {
            // Tüm seçimleri kaldır
            Array.from(passwordRow.children).forEach(monitor => {
                monitor.classList.remove('selected');
            });
            Array.from(codeRow.children).forEach(monitor => {
                monitor.classList.remove('selected');
            });
            // Sadece alt satırda seçim efekti uygula
            if (codeRow.children[selectedMonitorIndex]) {
                codeRow.children[selectedMonitorIndex].classList.add('selected');
            }
        }

        // Timer fonksiyonu
        function startTimer() {
            timer = 60;
            antivirusTime = 60;
            updateTimerDisplay();
            updateAntivirusTimeDisplay();

            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timer--;
                antivirusTime--;
                updateTimerDisplay();
                updateAntivirusTimeDisplay();

                if(timer <= 0) {
                    clearInterval(timerInterval);
                    endGame(false);
                }
                // Antivirüs süresi sıfırlanırsa burada reset animasyonu ve şifre reseti eklenebilir
                if(antivirusTime <= 0) {
                    antivirusTime = 60;
                    updateAntivirusTimeDisplay();
                    // TODO: Şifre resetleme ve animasyon efekti burada tetiklenecek
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timer / 60);
            const seconds = timer % 60;
            timerElement.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        // Oyun sonu
        function endGame(won) {
            gameStarted = false;
            clearInterval(timerInterval);
            
            if(won) {
                document.getElementById('remainingTime').textContent = timerElement.textContent;
                winScreen.classList.remove('hidden');
                gameArea.classList.add('hidden');
            } else {
                gameOverScreen.classList.remove('hidden');
                gameArea.classList.add('hidden');
            }
        }

        // Event Listeners
        document.getElementById('startButton').addEventListener('click', () => {
            startScreen.classList.add('hidden');
            gameArea.classList.remove('hidden');
            gameStarted = true;
            createMonitors();
            startTimer();
        });

        document.getElementById('restartButton').addEventListener('click', () => {
            location.reload();
        });

        document.getElementById('nextLevelButton').addEventListener('click', () => {
            currentLevel++;
            gameArea.classList.remove('hidden');
            winScreen.classList.add('hidden');
            createMonitors();
            startTimer();
        });

        // Kontrol butonları
        leftBtn.addEventListener('click', () => {
            if (!gameStarted) return;
            selectedMonitorIndex = Math.max(0, selectedMonitorIndex - 1);
            updateSelection();
        });

        rightBtn.addEventListener('click', () => {
            if (!gameStarted) return;
            selectedMonitorIndex = Math.min(8, selectedMonitorIndex + 1);
            updateSelection();
        });

        usb.addEventListener('click', () => {
            if (!gameStarted) return;
            isUSBActive = !isUSBActive;
            usb.classList.toggle('active');
        });

        // Klavye kontrolleri
        document.addEventListener('keydown', (e) => {
            if (!gameStarted) return;

            switch(e.key) {
                case 'ArrowLeft':
                    leftBtn.click();
                    break;
                case 'ArrowRight':
                    rightBtn.click();
                    break;
                case ' ':
                    usb.click();
                    break;
                case 'Enter':
                    connectBtn.click();
                    break;
            }
        });

        // Connect butonu
        connectBtn.addEventListener('click', () => {
            if (!gameStarted || !isUSBActive) return;

            // Burada oyun mantığı devam edecek...
            // Şimdilik test için hemen kazanma
            endGame(true);
        });

        // Touch olayları için swipe desteği
        let touchStartX = 0;
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
        });

        document.addEventListener('touchend', (e) => {
            if (!gameStarted) return;
            
            const touchEndX = e.changedTouches[0].clientX;
            const diffX = touchEndX - touchStartX;

            if (Math.abs(diffX) > 50) { // minimum swipe mesafesi
                if (diffX > 0) {
                    rightBtn.click();
                } else {
                    leftBtn.click();
                }
            }
        });

        // Ekran boyutu değişirse kabloları ve kalkanları yeniden konumlandır
        window.addEventListener('resize', () => {
            setTimeout(() => {
                positionVerticalWires();
                positionShields();
            }, 0);
        });

        // Her passwordRow-codeRow monitör çifti için dikey kablo çiz
        function positionVerticalWires() {
            // Eski kabloları temizle
            document.querySelectorAll('.monitor-vertical-wire').forEach(wire => wire.remove());
            document.querySelectorAll('.shield-icon').forEach(icon => icon.remove());
            document.querySelectorAll('.shield-down-wire').forEach(wire => wire.remove());
            const passwordMonitors = passwordRow.children;
            const codeMonitors = codeRow.children;
            const container = document.getElementById('gameContainer');

            for (let i = 0; i < passwordMonitors.length; i++) {
                const topBox = passwordMonitors[i].getBoundingClientRect();
                const bottomBox = codeMonitors[i].getBoundingClientRect();
                const containerBox = container.getBoundingClientRect();

                // Başlangıç noktası: üst kutunun alt merkezi
                const startX = topBox.left + topBox.width / 2 - containerBox.left;
                const startY = topBox.bottom - containerBox.top;
                // Bitiş noktası: alt kutunun üst merkezi
                const endY = bottomBox.top - containerBox.top;
                const height = endY - startY;

                // Kabloyu oluştur
                const wire = document.createElement('div');
                wire.className = 'monitor-vertical-wire';
                wire.style.left = `${startX - 1}px`;
                wire.style.top = `${startY}px`;
                wire.style.height = `${height}px`;
                container.appendChild(wire);
            }

            // Shield ikonlarını iki kablonun arasına ve ortalanmış şekilde ekle (toplam 8 adet)
            for (let i = 0; i < passwordMonitors.length - 1; i++) {
                const topBox1 = passwordMonitors[i].getBoundingClientRect();
                const topBox2 = passwordMonitors[i+1].getBoundingClientRect();
                const bottomBox1 = codeMonitors[i].getBoundingClientRect();
                const bottomBox2 = codeMonitors[i+1].getBoundingClientRect();
                const containerBox = container.getBoundingClientRect();

                // İki üst kutunun alt merkezlerinin ortası
                const startX1 = topBox1.left + topBox1.width / 2 - containerBox.left;
                const startX2 = topBox2.left + topBox2.width / 2 - containerBox.left;
                const midX = (startX1 + startX2) / 2;

                // Üst ve alt kutuların ortası (dikeyde)
                const startY = topBox1.bottom - containerBox.top;
                const endY = bottomBox1.top - containerBox.top;
                const midY = (startY + endY) / 2;

                // Shield ikonunu oluştur
                const shield = document.createElement('div');
                shield.className = 'shield-icon';
                shield.style.left = `${midX - 14}px`;
                shield.style.top = `${midY - 14}px`;
                shield.innerHTML = `<svg viewBox="0 0 28 28"><path class="shield-shape" d="M14 3 L24 7 Q23 18 14 25 Q5 18 4 7 Z"/></svg>`;
                container.appendChild(shield);

                // Shield'ın alt merkezinden cyan çizgiye kadar beyaz kablo çiz
                // Shield'ın alt merkezi
                const shieldBottomY = midY + 14; // shield yüksekliği/2
                const shieldCenterX = midX;

                // Kontrol paneli separator çizgisinin konumunu bul
                const separator = document.querySelector('.control-separator');
                if (separator) {
                    const sepRect = separator.getBoundingClientRect();
                    const sepY = sepRect.top - containerBox.top;
                    // Kablonun uzunluğu: shield'ın altından separator çizgisinin biraz altına kadar
                    const wireLength = sepY + 6 - shieldBottomY; // 6px aşağı taşsın
                    const downWire = document.createElement('div');
                    downWire.className = 'shield-down-wire';
                    downWire.style.left = `${shieldCenterX - 0.5}px`;
                    downWire.style.top = `${shieldBottomY}px`;
                    downWire.style.height = `${wireLength}px`;
                    container.appendChild(downWire);
                }
            }
        }

        // JS: Oyun süresi ile antivirüs süresini senkronize et
        function updateAntivirusTimeDisplay() {
            document.getElementById('antivirusTime').textContent = antivirusTime;
        }
    </script>
</body>
</html> 
